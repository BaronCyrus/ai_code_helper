<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin>
    <id>com.github.baroncyrus.aicodehelper</id>
    <name>AICodeAssistant</name>
    <vendor>baroncyrus</vendor>

    <depends>com.intellij.modules.platform</depends>
    <depends>org.intellij.plugins.markdown</depends>
    <depends>Git4Idea</depends>

    <resource-bundle>messages.MyBundle</resource-bundle>

    <extensions defaultExtensionNs="com.intellij">
        <toolWindow id="AICodeAssist" anchor="right" factoryClass="com.github.baroncyrus.aicodehelper.toolWindow.MyToolWindowFactory" icon="/icons/helpericon.svg"/>
        <applicationConfigurable parentId="tools" instance="com.github.baroncyrus.aicodehelper.settings.CodeAssistSettingsConfigurable" id="com.github.baroncyrus.aicodehelper.settings.CodeAssistSettingsConfigurable" displayName="AI Code Assist"/>
        <applicationService serviceImplementation="com.github.baroncyrus.aicodehelper.settings.ApiKeySettings"/>
    </extensions>

    <applicationListeners>
        <listener class="com.github.baroncyrus.aicodehelper.listeners.MyApplicationActivationListener" topic="com.intellij.openapi.application.ApplicationActivationListener"/>
    </applicationListeners>
    <actions>
        <group id="CodeAssistant.Group" text="CodeAssistant" description="AI辅助功能菜单" popup="true" icon="/icons/helpericon.svg">
            <add-to-group group-id="EditorPopupMenu" anchor="first"/>
            <!-- 子菜单项 -->
            <action id="SelectFunction1" class="com.github.baroncyrus.aicodehelper.actions.SelectFunction1" text="Explain Code" description="Function1"/>
            <action id="SelectFunction2" class="com.github.baroncyrus.aicodehelper.actions.SelectFunction2" text="Refactor Suggestion" description="Function2"/>
            <action id="SelectFunction3" class="com.github.baroncyrus.aicodehelper.actions.SelectFunction3" text="Find Bugs" description="Function3"/>
        </group>
        <action id="AICommitMessage.Generate" class="com.github.baroncyrus.aicodehelper.actions.GenerateCommitMessageAction" text="Generate AI Commit Message" description="Generate a commit message using AI" icon="/icons/helpericon.svg">
            <add-to-group group-id="Vcs.MessageActionGroup" anchor="after" relative-to-action="Vcs.ShowMessageHistory"/>
        </action>
    </actions>
</idea-plugin>
